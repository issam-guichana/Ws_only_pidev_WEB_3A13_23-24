<head>

		<!-- Basic Page Needs
																													================================================== -->
		<meta charset="utf-8">
		<title>Formini.tn</title>

		<!-- Mobile Specific Metas
																													================================================== -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="Construction Html5 Template">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
		<meta name="author" content="Themefisher">
		<meta name="generator" content="Themefisher Educenter HTML Template v1.0">

		<!-- ** Plugins Needed for the Project ** -->
		<!-- Bootstrap -->
		<link
		rel="stylesheet" href="{{asset('Front/plugins/bootstrap/bootstrap.min.css')}}"> <!-- slick slider -->
		<link
		rel="stylesheet" href="{{asset('Front/plugins/slick/slick.css')}}">
		<!-- themefy-icon -->
		<link
		rel="stylesheet" href="{{asset('Front/plugins/themify-icons/themify-icons.css')}}">
		<!-- animation css -->
		<link
		rel="stylesheet" href="{{asset('Front/plugins/animate/animate.css')}}">
		<!-- aos -->
		<link
		rel="stylesheet" href="{{asset('Front/plugins/aos/aos.css')}}">
		<!-- venobox popup -->
		<link
		rel="stylesheet" href="{{asset('Front/plugins/venobox/venobox.css')}}">

		<!-- Main Stylesheet -->
		<link
		href="{{asset('Front/css/style.css')}}" rel="stylesheet">

		<!--Favicon-->
		<link rel="shortcut icon" href="{{asset('Front/images/favicon.png')}}" type="image/x-icon">
		<link rel="icon" href="{{asset('Front/images/favicon.png')}}" type="image/x-icon">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/emoji-mart/css/emoji-mart.css">
                 <link rel="stylesheet" href="{{ asset('bundles/mercuryseriesflashy/css/flashy.css') }}">

  <script src="https://cdn.jsdelivr.net/npm/libsignal-protocol/dist/libsignal-protocol.min.js"></script>

<link rel="stylesheet" href="{{ asset('bundles/mercuryseriesflashy/css/flashy.css') }}">

<script src="{{ asset('bundles/mercuryseriesflashy/js/flashy.js') }}"></script>
<link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700' rel='stylesheet'>
/* CSS for the chat messages */

<style>
.message {
    margin-bottom: 10px;
    padding: 8px 12px;
    border-radius: 15px;
    max-width: 70%;
}

.me {
    background-color: #007bff;
    color: white;
    align-self: flex-end;
}

.other {
    background-color: #d8d1bd;
    color: black;
    align-self: flex-start;
}

.message-body {
    word-wrap: break-word;
}
/* CSS for the chat footer */
.chat-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
}

/* CSS for the chat submit button */
.chat-submit {
    flex-shrink: 0; /* Prevent the button from shrinking */
}

.chat-submit button {
    background-color: #007bff; /* Button background color */
    color: white; /* Button text color */
    border: none; /* Remove button border */
    border-radius: 20px; /* Rounded button corners */
    padding: 10px 20px; /* Button padding */
    cursor: pointer; /* Change cursor to pointer on hover */
    transition: background-color 0.3s; /* Smooth transition for background color */
}

.chat-submit button:hover {
    background-color: #0056b3; /* Darker background color on hover */
}

.chat-input {
    position: relative; /* Relative positioning for the input area */
}

.chat-input textarea {
    width: 100%; /* Full width for the textarea */
    min-height: 60px; /* Minimum height for the textarea */
    padding: 10px; /* Padding for the textarea */
    border-radius: 10px; /* Rounded corners for the textarea */
    border: 1px solid #ced4da; /* Border color for the textarea */
    resize: none; /* Disable textarea resizing */
}

</style>

	</head>

	<body>
		<!-- preloader start -->
		<div class="preloader">
			<img src="{{asset('Front/images/preloader.gif')}}" alt="preloader">
		</div>
		<!-- preloader end -->

		<!-- header -->
		<header
			class="fixed-top header">
			<!-- top header -->
			<div class="top-header py-2 bg-white">
				<div class="container">
					<div class="row no-gutters">
						<div class="col-lg-4 text-center text-lg-left">
							<a class="text-color mr-3" href="tel:+443003030266">
								<strong>CALL</strong>
								+44 300 303 0266</a>
							<ul class="list-inline d-inline">
								<li class="list-inline-item mx-0">
									<a class="d-inline-block p-2 text-color" href="https://facebook.com/themefisher/">
										<i class="ti-facebook"></i>
									</a>
								</li>
								<li class="list-inline-item mx-0">
									<a class="d-inline-block p-2 text-color" href="https://twitter.com/themefisher">
										<i class="ti-twitter-alt"></i>
									</a>
								</li>
								<li class="list-inline-item mx-0">
									<a class="d-inline-block p-2 text-color" href="https://github.com/themefisher">
										<i class="ti-github"></i>
									</a>
								</li>
								<li class="list-inline-item mx-0">
									<a class="d-inline-block p-2 text-color" href="https://instagram.com/themefisher/">
										<i class="ti-instagram"></i>
									</a>
								</li>
							</ul>
						</div>
						<div class="col-lg-8 text-center text-lg-right">
							<ul class="list-inline">
								<li class="list-inline-item">
									<a class="text-uppercase text-color p-sm-2 py-2 px-0 d-inline-block" href="notice.html.twig">notice</a>
								</li>
								<li class="list-inline-item">
									<a class="text-uppercase text-color p-sm-2 py-2 px-0 d-inline-block" href="research.html.twig">research</a>
								</li>
								<li class="list-inline-item">
									<a class="text-uppercase text-color p-sm-2 py-2 px-0 d-inline-block" href="scholarship.html.twig">SCHOLARSHIP</a>
								</li>
								<li class="list-inline-item">
									<a class="text-uppercase text-color p-sm-2 py-2 px-0 d-inline-block" href="#loginModal" data-toggle="modal" data-target="#loginModal">login</a>
								</li>
								<li class="list-inline-item">
									<a class="text-uppercase text-color p-sm-2 py-2 px-0 d-inline-block" href="#signupModal" data-toggle="modal" data-target="#signupModal">register</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<!-- navbar -->
			<div class="navigation w-100">
				<div class="container">
					<nav class="navbar navbar-expand-lg navbar-dark p-0">
						<a class="navbar-brand" href="index.html.twig"><img src="{{asset('Front/images/logo1.png')}}" alt="logo"></a>
						<button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
							<span class="navbar-toggler-icon"></span>
						</button>

						<div class="collapse navbar-collapse" id="navigation">
							<ul class="navbar-nav ml-auto text-center">
								<li class="nav-item @@home">
									<a class="nav-link" href="index.html.twig">Acceuil</a>
								</li>
								<li class="nav-item @@about">
									<a class="nav-link" href="about.html.twig">About</a>
								</li>
								<li class="nav-item active">
									<a class="nav-link" href="courses.html.twig">FORMATIONS</a>
								</li>
								<li class="nav-item @@events">
									<a class="nav-link" href="events.html.twig">EVENEMENTS</a>
								</li>
								<li class="nav-item @@blog">
									<a class="nav-link" href="blog.html.twig">BLOG</a>
								</li>
								
								<li class="nav-item @@contact">
									<a class="nav-link" href="contact.html.twig">CONTACT</a>
								</li>
							</ul>
						</div>
					</nav>
				</div>
			</div>
		</header>
		<!-- /header -->
		<!-- Modal -->
		<div class="modal fade" id="signupModal" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content rounded-0 border-0 p-4">
					<div class="modal-header border-0">
						<h3>Register</h3>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<div class="login">
							<form action="#" class="row">
								<div class="col-12">
									<input type="text" class="form-control mb-3" id="signupPhone" name="signupPhone" placeholder="Phone">
								</div>
								<div class="col-12">
									<input type="text" class="form-control mb-3" id="signupName" name="signupName" placeholder="Name">
								</div>
								<div class="col-12">
									<input type="email" class="form-control mb-3" id="signupEmail" name="signupEmail" placeholder="Email">
								</div>
								<div class="col-12">
									<input type="password" class="form-control mb-3" id="signupPassword" name="signupPassword" placeholder="Password">
								</div>
								<div class="col-12">
									<button type="submit" class="btn btn-primary">SIGN UP</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Modal -->
		<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content rounded-0 border-0 p-4">
					<div class="modal-header border-0">
						<h3>Login</h3>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<form action="#" class="row">
							<div class="col-12">
								<input type="text" class="form-control mb-3" id="loginPhone" name="loginPhone" placeholder="Phone">
							</div>
							<div class="col-12">
								<input type="text" class="form-control mb-3" id="loginName" name="loginName" placeholder="Name">
							</div>
							<div class="col-12">
								<input type="password" class="form-control mb-3" id="loginPassword" name="loginPassword" placeholder="Password">
							</div>
							<div class="col-12">
								<button type="submit" class="btn btn-primary">LOGIN</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>

		<!-- page title -->
		<section class="page-title-section overlay" data-background="images/backgrounds/page-title.jpg">
			<div class="container">
				<div class="row">
					<div class="col-md-8">
						<ul class="list-inline custom-breadcrumb mb-2">
							<li class="list-inline-item">
								<a class="h2 text-primary font-secondary" href="index.html.twig">Messagerie</a>
							</li>
							<li class="list-inline-item text-white h3 font-secondary nasted">chat</li>
						</ul>
						<p class="text-lighten mb-0">Veuillez visiter le room pour plus d'intérac</p>
					</div>
				</div>
			</div>
		</section>
		<!-- /page title -->

		<!-- courses -->
<div class="page-content">
    <div class="title-container">
        <h2 class="form-title"> </h2>
    </div>
    <br/>

    {% for message in app.flashes('error') %}
        <div class="alert alert-danger">{{ message }}</div>
    {% endfor %}

<form method="post">
    {% block content %}
    <div class="container py-4">
        <div class="row">
            <!-- First card (Membres) -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <div class="card-header">
                        <h5 class="card-title"> <i class="fas fa-users"></i>Membres</h5>
                    </div>
                    <div class="card-body">
                        {% for participant in participants %}
                        <div class="participant">
                            <a>
                                <i class="fas fa-user"></i> {{ participant.user.getUsername() }}
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Second card (Chat room) -->
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-header">
                        <h5 class="card-title"> <i class="fas fa-comments"></i>{{roomname}}</h5>
                    </div>
                    <div class="card-body">
                        <form id="search-form" class="form-inline justify-content-center mb-3">
                            <div class="input-group" style="max-width: 500px; border-radius: 20px;">
                                <input type="text" id="search-input" name="query" class="form-control" placeholder="Rechercher un message ..." aria-label="Search">
                                <div class="input-group-append">
                                    <button class="btn btn-primary" type="submit" style="border-radius: 0 20px 20px 0;">
                                        <i class="fas fa-search"></i> Rechercher
                                    </button>
                                </div>
                            </div>
                        </form>

                        <div id="search-results"></div>
                        <div class="messages" id="message-container">
                            {% for message in messages %}
                            <div class="message {% if message.senderMsg == 'me' %}me{% else %}other{% endif %}">
                                <span class="message-body">{{ message.contenu }}</span>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="card-footer">
                        <div id="chat-form" style="position: relative;">
                            <textarea class="form-control" name="contenu" id="contenu" placeholder="Taper un message..." style="padding-right: 60px;"></textarea>
                            <button type="submit" class="btn btn-primary" style="position: absolute; right: 10px; bottom: 10px;">Send</button>
                        </div>
                        <div class="alert alert-danger">
                            {% if errors is defined and errors is not empty and errors['contenu'] is defined %}
                            <div class="text-danger">{{ errors['contenu'] }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Third card (Charte utilisation du room) -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <div class="card-header">
                        <h5 class="card-title"> <i class="fas fa-info-circle"></i>Charte utilisation </h5>
                    </div>
                    <div class="card-body">
                        <!-- Content of the charte utilisation du room card -->
                        <!-- You can add your content here -->
					 	<p><i class="fas fa-exclamation-triangle text-warning"></i>Tous messages contenant des mots inappropriés sera masqué automatiquement</p>
                        <p><i class="fas fa-exclamation-triangle text-warning"></i>Pour synchroniser le contact avec votre formateur, nous vous conseillons de mentionner son nom</p>
                         <p><i class="fas fa-exclamation-triangle text-warning"></i>Tout comportement innaprroprié peuvent conduire à la suspension de la discussion par l'admin</p>

					</div>
                </div>
            </div>

        </div>
    </div>
    {% endblock %}
</form>



    </div>
</div>

</div>

		<!-- footer content -->
			<div class="footer bg-footer section border-bottom">
				<div class="container">
					<div class="row">
						<div
							class="col-lg-4 col-sm-8 mb-5 mb-lg-0">
							<!-- logo -->
							<a class="logo-footer" href="index.html.twig"><img class="img-fluid mb-4" src="Front/images/logo1.png" alt="logo"></a>
							<ul class="list-unstyled">
								<li class="mb-2">23621 15 Mile Rd #C104, Clinton MI, 48035, New York, USA</li>
								<li class="mb-2">+1 (2) 345 6789</li>
								<li class="mb-2">+1 (2) 345 6789</li>
								<li class="mb-2">contact@yourdomain.com</li>
							</ul>
						</div>
						<!-- company -->
						<div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0">
							<h4 class="text-white mb-5">COMPANY</h4>
							<ul class="list-unstyled">
								<li class="mb-3">
									<a class="text-color" href="about.html.twig">About Us</a>
								</li>
								<li class="mb-3">
									<a class="text-color" href="teacher.html.twig">Our Teacher</a>
								</li>
								<li class="mb-3">
									<a class="text-color" href="contact.html.twig">Contact</a>
								</li>
								<li class="mb-3">
									<a class="text-color" href="blog.html.twig">Blog</a>
								</li>
							</ul>
						</div>
						<!-- links -->
						<div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0">
							<h4 class="text-white mb-5">LINKS</h4>
							<ul class="list-unstyled">
								<li class="mb-3">
									<a class="text-color" href="courses.html.twig">Courses</a>
								</li>
								<li class="mb-3">
									<a class="text-color" href="events.html.twig">Events</a>
								</li>
								<li class="mb-3">
									<a class="text-color" href="notice.html.twig">Notice</a>
								</li>
								<li class="mb-3">
									<a class="text-color" href="scholarship.html.twig">Scholarship</a>
								</li>
							</ul>
						</div>
						<!-- support -->
						<div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0">
							<h4 class="text-white mb-5">SUPPORT</h4>
							<ul class="list-unstyled">
								<li class="mb-3">
									<a class="text-color" href="https://themefisher.com/blog">Forums</a>
								</li>
								<li class="mb-3">
									<a class="text-color" href="https://docs.themefisher.com/">Documentation</a>
								</li>
								<li class="mb-3">
									<a class="text-color" href="#!">Language</a>
								</li>
								<li class="mb-3">
									<a class="text-color" href="#!">Release Status</a>
								</li>
							</ul>
						</div>
						<!-- support -->
						<div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0">
							<h4 class="text-white mb-5">RECOMMEND</h4>
							<ul class="list-unstyled">
								<li class="mb-3">
									<a class="text-color" href="https://themefisher.com/">WordPress</a>
								</li>
								<li class="mb-3">
									<a class="text-color" href="https://themefisher.com/">LearnPress</a>
								</li>
								<li class="mb-3">
									<a class="text-color" href="https://themefisher.com/">WooCommerce</a>
								</li>
								<li class="mb-3">
									<a class="text-color" href="https://themefisher.com/">bbPress</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<!-- copyright -->
			<div class="copyright py-4 bg-footer">
				<div class="container">
					<div class="row">
						<div class="col-sm-7 text-sm-left text-center">
							<p class="mb-0">Copyright &copy;
								<script>
									var CurrentYear = new Date().getFullYear()
document.write(CurrentYear)
								</script>
								, designed & developed by
								<a href="https://themefisher.com/" class="text-muted">Themefisher</a>
							</p>
						</div>
						<div class="col-sm-5 text-sm-right text-center">
							<ul class="list-inline">
								<li class="list-inline-item">
									<a class="d-inline-block p-2" href="https://facebook.com/themefisher/">
										<i class="ti-facebook text-primary"></i>
									</a>
								</li>
								<li class="list-inline-item">
									<a class="d-inline-block p-2" href="https://twitter.com/themefisher">
										<i class="ti-twitter-alt text-primary"></i>
									</a>
								</li>
								<li class="list-inline-item">
									<a class="d-inline-block p-2" href="https://github.com/themefisher">
										<i class="ti-github text-primary"></i>
									</a>
								</li>
								<li class="list-inline-item">
									<a class="d-inline-block p-2" href="https://instagram.com/themefisher/">
										<i class="ti-instagram text-primary"></i>
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</footer>
		<!-- /footer -->

		<!-- jQuery -->
		<script src="{{asset('Front/plugins/jQuery/jquery.min.js')}}"></script>
		<!-- Bootstrap JS -->
		<script src="{{asset('Front/plugins/bootstrap/bootstrap.min.js')}}"></script>
		<!-- slick slider -->
		<script src="{{asset('Front/plugins/slick/slick.min.js')}}"></script>
		<!-- aos -->
		<script src="{{asset('Front/plugins/aos/aos.js')}}"></script>
		<!-- venobox popup -->
		<script src="{{asset('Front/plugins/venobox/venobox.min.js')}}"></script>
		<!-- filter -->
		<script src="{{asset('Front/plugins/filterizr/jquery.filterizr.min.js')}}"></script>
		<!-- google map -->
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcABaamniA6OL5YvYSpB3pFMNrXwXnLwU"></script>
		<script src="{{asset('Front/plugins/google-map/gmap.js')}}"></script>

		<!-- Main Script -->
		<script src="{{asset('Front/js/script.js')}}"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Your JavaScript code here -->
	<!-- JavaScript code for AJAX search -->
<script>
  $(document).ready(function(){
    $('#search-input').on('input', function(){
        var query = $(this).val();
        $.ajax({
            url: '/search',
            method: 'GET',
            data: { query: query },
            success: function(response) {
                // Clear previous results
                $('.message').hide(); // Hide all messages
                // Show only messages that match the search query
                response.forEach(function(message) {
                    $('.message:contains("' + message.contenu + '")').show(); // Show messages containing the search query
                });
            },
            error: function(xhr, status, error) {
                console.error(xhr.responseText);
            }
        });
    });
});

</script>
<script>
        // Display FlashyNotifier success message
        Flashy.success("Votre message a été bien reçu!");
    </script>

    
	 <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Include Flashy default JavaScript -->
    <script src="{{ asset('bundles/mercuryseriesflashy/js/flashy.js') }}"></script>
    <!-- Include Flashy default partial -->
    {{ include('@MercurySeriesFlashy/flashy.html.twig') }}
<script>
    $(document).ready(function(){
        $('#chat-form').submit(function(event){
            event.preventDefault();
            var message = $('#contenu').val();
            $('#contenu').val('');
            $('#message-container').append('<div class="message me"><span class="message-body">' + message + '</span></div>');
            // Here you would typically send the message to the server and receive a response
            // For the sake of simplicity, I'm simulating the response after a short delay
            setTimeout(function(){
                $('#message-container').append('<div class="message other"><span class="message-body">This is a response from the server</span></div>');
                $('.messages').scrollTop($('.messages')[0].scrollHeight); // Auto scroll to bottom
            }, 1000);
        });
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/emoji-mart/dist/main.js">
 function logEmojiList() {
        console.log(EmojiMart.EmojiIndex.search(''));
    }
 $(document).ready(function(){

        $('#chat-form').submit(function(event){
            event.preventDefault();
            var message = $('#contenu').val();
            $('#contenu').val('');
            $('#message-container').append('<div class="message me"><span class="message-body">' + message + '</span></div>');
            // Here you would typically send the message to the server and receive a response
            // For the sake of simplicity, I'm simulating the response after a short delay
            setTimeout(function(){
                $('#message-container').append('<div class="message other"><span class="message-body">This is a response from the server</span></div>');
                $('.messages').scrollTop($('.messages')[0].scrollHeight); // Auto scroll to bottom
            }, 1000);
        });

        const picker = new EmojiMart.EmojiPicker();
        picker.renderPicker();

        $('#emojiButton').click(function(){
            picker.togglePicker();
        });
    });

   
</script>
<script src="{{ asset('bundles/mercuryseriesflashy/js/flashy.js') }}"></script>

<script>
    // Initialize Flashy
    const flashy = new Flashy();

    $(document).ready(function(){
        $('#chat-form').submit(function(event){
            event.preventDefault();
            var message = $('#contenu').val();
            $('#contenu').val('');
            $('#message-container').append('<div class="message me"><span class="message-body">' + message + '</span></div>');
            // Here you would typically send the message to the server and receive a response
            // For the sake of simplicity, I'm simulating the response after a short delay
            setTimeout(function(){
                $('#message-container').append('<div class="message other"><span class="message-body">This is a response from the server</span></div>');
                $('.messages').scrollTop($('.messages')[0].scrollHeight); // Auto scroll to bottom
                // Trigger Flashy success message
                flashy.success("Votre message a été bien reçu!");
            }, 1000);
        });
    });
</script>
